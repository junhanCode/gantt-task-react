# TitleCell 快速开始指南

## 快速运行

### 1. 安装依赖（如果还没有）

```bash
cd example
npm install
```

### 2. 启动开发服务器

```bash
npm start
```

### 3. 在浏览器中查看效果

浏览器会自动打开 `http://localhost:3000`

### 4. 启用 TitleCell 组件

在页面的"✨ 新功能展示说明"区域，找到并勾选：

```
4️⃣ TitleCell 自定义渲染: ☑ 启用自定义任务名列（包含未读标记、关注、跟进、延期等功能）
```

## 预期效果

启用后，你会看到任务名列显示丰富的信息：

### 示例 1：有子任务的父任务
```
[*] ▼ 1 【系統開發】哈哈哈 ⭐ ⚠️ [延期 5 天]
```
- `[*]` - 未读标记（红色）
- `▼` - 展开图标（有子任务）
- `1` - 任务编号
- `【系統開發】` - 项目标签
- `哈哈哈` - 任务名称
- `⭐` - 关注标记（黄色）
- `⚠️` - 跟进标记（红色）
- `[延期 5 天]` - 延期状态（粉色背景）

### 示例 2：子任务
```
    ▶ 2 【Others】子任务 👁️
```
- 缩进显示层级关系
- `▶` - 折叠图标（无子任务时为空白）
- `2` - 子任务编号
- `👁️` - 隐藏标记（灰色）

### 示例 3：暂停的任务
```
[*] ▶ 3 【MIL】测试任务 [暂停 3 天]
```
- `[暂停 3 天]` - 暂停状态（灰色背景）

## 交互功能

### 1. 点击任务标题
- 如果任务未读，会自动标记为已读
- 根据任务状态执行不同操作：
  - 草稿/已撤销：打开编辑弹框
  - 其他状态：打开查看弹框

### 2. 点击展开/折叠图标
- 展开或折叠子任务
- 同时更新甘特图的显示

### 3. 悬停查看完整信息
- 鼠标悬停在任务标题上可查看完整的项目标签和任务名称

## 测试数据

demo 中的测试数据包含：
- ✅ 70% 任务已读，30% 未读
- ✅ 20% 任务被关注
- ✅ 10% 任务被隐藏
- ✅ 15% 任务需要跟进
- ✅ 5% 任务为会议决议
- ✅ 部分任务有延期状态
- ✅ 部分任务为暂停状态

## 自定义配置

### 修改显示逻辑

编辑 `example/src/helper.tsx`：

```typescript
// 调整各状态的概率
extendedTask.read = Math.random() > 0.3; // 70% 已读
extendedTask.focus = Math.random() > 0.8; // 20% 关注
extendedTask.hidden = Math.random() > 0.9; // 10% 隐藏
extendedTask.follow = Math.random() > 0.85; // 15% 跟进
```

### 修改样式

编辑 `example/src/components/TitleCell/TitleCell.module.css`：

```css
/* 修改未读标记颜色 */
.unRead {
  color: #ff4d4f; /* 改为你想要的颜色 */
}

/* 修改延期标记样式 */
.statusCtn {
  border-radius: 4px; /* 调整圆角 */
  font-size: 12px; /* 调整字体大小 */
}
```

### 调整列宽

在界面上找到"任务名列宽度"控制器，拖动滑块调整宽度（建议 300-400px 以完整显示所有信息）。

## 性能测试

### 测试大量数据

1. 在界面上找到"🚀 性能测试数据配置"区域
2. 勾选"使用大量测试数据"
3. 设置父任务数和子任务数（如 100 父任务 × 10 子任务 = 1100 个任务）
4. 点击"重新加载数据"按钮
5. 观察 TitleCell 的渲染性能

### 性能优化建议

- TitleCell 组件已使用 `React.memo` 优化
- 对于超过 1000 个任务的场景，建议启用虚拟滚动
- 可以考虑懒加载子任务

## 常见问题

### Q1: 为什么项目标签没有显示？

A: 确保任务数据中包含 `projectTags` 字段（数组格式）。

### Q2: 如何隐藏某些标记？

A: 在 TitleCell.tsx 中注释掉对应的渲染代码，或者设置 `display: "none"`。

### Q3: 可以添加自定义标记吗？

A: 可以！在 TitleCell.tsx 中添加新的渲染逻辑，并在 helper.tsx 中添加对应的数据字段。

### Q4: 如何关闭 TitleCell 功能？

A: 取消勾选"启用自定义任务名列"复选框即可恢复默认渲染。

## 下一步

- 查看 [TitleCell-README.md](./TitleCell-README.md) 了解详细的 API 文档
- 根据你的业务需求定制 TitleCell 组件
- 集成到你的实际项目中

## 技术支持

如有问题，请查看：
- 项目 README
- 组件源码注释
- 浏览器控制台的日志输出
